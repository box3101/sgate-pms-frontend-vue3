import A from"./DFyDJeH6.js";import O from"./CQxuhVYe.js";import Q from"./DIXd-gAn.js";import{_ as W,r as d,c as o,o as n,G as X,b as m,w as _,n as I,B as E,a as t,t as C,al as Y,aa as Z,F as S,i as z,q as T,l as $,J as ee}from"./Uq0e7GML.js";import"./BLJf2Bvc.js";import"./82Czrkw7.js";const te={class:"rating-scale-table-container"},ae={class:"save-toast-icon"},ne={key:0,class:"loading-spinner"},oe={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},le={key:2,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},se={class:"save-toast-content"},ie={class:"save-toast-message"},re=["draggable","onDragstart","onDragover","onDrop","onDragend","onClick"],de={key:0,class:"editing-wrapper"},ue={key:1,class:"text-display-container"},ce={class:"text-content"},me=["onClick"],ve={class:"text-center"},ge={__name:"UiToast",emits:["row-selected"],setup(pe,{emit:L}){const M=L,h=d(!1);let f=null;const u=d({type:"saved",message:"모든 변경사항이 저장되었습니다",class:"save-toast--saved"});let y=null;const s=d({rowId:null,field:null}),k=d(null),U=d(""),x=(a,e,i=3e3)=>{f&&clearTimeout(f),u.value={type:a,message:e,class:`save-toast--${a}`},h.value=!0,a!=="saving"&&i>0&&(f=setTimeout(()=>{h.value=!1},i))},N=()=>{y&&clearTimeout(y),x("saving","저장 중...",0),y=setTimeout(()=>{R()},2e3)},R=async()=>{try{await new Promise(a=>setTimeout(a,500)),x("saved","자동 저장 완료",3e3)}catch{x("error","저장 실패. 다시 시도해주세요.",5e3)}},F=async(a,e)=>{var g;const i=v.value.find(V=>V.id===a);U.value=i[e],s.value={rowId:a,field:e},await ee(),(g=k.value)!=null&&g[0]&&k.value[0].focus()},w=()=>{s.value={rowId:null,field:null}},G=()=>{const a=v.value.find(e=>e.id===s.value.rowId);a&&s.value.field&&(a[s.value.field]=U.value),w()},H=a=>{M("row-selected",a)},K=d([{key:"name",title:"등급척도"},{key:"ratingCount",title:"평가등급수"}]),v=d([{id:1,name:"등급척도",ratingCount:0},{id:2,name:"평가등급수",ratingCount:0},{id:3,name:"평가항목",ratingCount:0},{id:4,name:"역량평가",ratingCount:0},{id:5,name:"성과평가",ratingCount:3},{id:6,name:"다면평가",ratingCount:5},{id:7,name:"리더십평가",ratingCount:4},{id:8,name:"업적평가",ratingCount:3},{id:9,name:"핵심가치평가",ratingCount:0},{id:10,name:"직무역량평가",ratingCount:4},{id:11,name:"업무성과평가",ratingCount:3},{id:12,name:"행동역량평가",ratingCount:0},{id:13,name:"종합평가",ratingCount:4},{id:14,name:"직무수행평가",ratingCount:5},{id:15,name:"팀워크평가",ratingCount:3},{id:16,name:"소통역량평가",ratingCount:4},{id:17,name:"목표달성평가",ratingCount:5},{id:18,name:"기여도평가",ratingCount:3},{id:19,name:"전문성평가",ratingCount:4},{id:20,name:"혁신역량평가",ratingCount:5}]);return(a,e)=>{const i=A,g=O,V=Q;return n(),o("div",te,[(n(),X(Z,{to:"body"},[m(Y,{name:"save-toast","enter-active-class":"save-toast-enter-active","leave-active-class":"save-toast-leave-active","enter-from-class":"save-toast-enter-from","leave-to-class":"save-toast-leave-to"},{default:_(()=>[h.value?(n(),o("div",{key:0,class:E(["save-toast",u.value.class]),role:"alert","aria-live":"polite"},[t("div",ae,[u.value.type==="saving"?(n(),o("div",ne)):u.value.type==="saved"?(n(),o("svg",oe,e[3]||(e[3]=[t("path",{d:"M20 6L9 17l-5-5"},null,-1)]))):u.value.type==="error"?(n(),o("svg",le,e[4]||(e[4]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),t("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)]))):I("",!0)]),t("div",se,[t("div",ie,C(u.value.message),1)])],2)):I("",!0)]),_:1})])),m(V,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=c=>v.value=c),title:"등급척도 그룹",editable:"",sortable:"",scrollable:"","max-height":"calc(100vh - 200px)"},{colgroup:_(()=>e[5]||(e[5]=[t("col",{style:{width:"40px"}},null,-1),t("col",{style:{width:"auto"}},null,-1),t("col",{style:{width:"80px"}},null,-1)])),header:_(({selectAll:c,isAllSelected:b})=>[t("th",null,[m(i,{size:"large",onClick:e[0]||(e[0]=T(()=>{},["stop"])),modelValue:b,"onUpdate:modelValue":c},null,8,["modelValue","onUpdate:modelValue"])]),(n(!0),o(S,null,z(K.value,p=>(n(),o("th",{key:p.key},C(p.title),1))),128))]),body:_(({rows:c,toggleRowSelection:b,isRowSelected:p,handleDragStart:q,handleDragOver:J,handleDrop:P,handleDragEnd:j,sortable:D})=>[(n(!0),o(S,null,z(c,(l,B)=>(n(),o("tr",{key:l.id,draggable:D,onDragstart:r=>q(r,B),onDragover:J,onDrop:r=>P(r,B),onDragend:j,class:E({"sortable-row":D}),onClick:r=>H(l),style:{cursor:"pointer"}},[t("td",null,[m(i,{size:"large",onClick:e[1]||(e[1]=T(()=>{},["stop"])),modelValue:p(l),"onUpdate:modelValue":()=>b(l)},null,8,["modelValue","onUpdate:modelValue"])]),t("td",null,[s.value.rowId===l.id&&s.value.field==="name"?(n(),o("div",de,[m(g,{ref_for:!0,ref_key:"editInput",ref:k,modelValue:l.name,"onUpdate:modelValue":r=>l.name=r,placeholder:"등급척도명을 입력하세요",onBlur:w,onKeyup:[$(w,["enter"]),$(G,["escape"])],onInput:N},null,8,["modelValue","onUpdate:modelValue"])])):(n(),o("div",ue,[t("span",ce,C(l.name||"등급척도명을 입력하세요"),1),t("button",{class:"edit-icon-btn",onClick:T(r=>F(l.id,"name"),["stop"]),title:"편집"},e[6]||(e[6]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),8,me)]))]),t("td",ve,C(l.ratingCount),1)],42,re))),128))]),_:1},8,["modelValue"])])}}},xe=W(ge,[["__scopeId","data-v-b5d38e27"]]);export{xe as default};
