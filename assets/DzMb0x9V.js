import{_ as R,r as d,g as M,a4 as $,e as T,H as U,c as v,o as c,a as m,G as q,n as C,t as g,B as f,F as A,i as F,x as V,aa as K,J as z}from"./DBQ0s5Ec.js";const W=["tabindex","aria-expanded"],G={class:"ui-select__value"},J={key:0,class:"ui-select__selected-text"},P={key:1,class:"ui-select__placeholder"},Y={class:"ui-select__options",role:"listbox"},j=["aria-selected","onClick"],Q={key:0,class:"ui-select__no-results"},x="select-dropdown-toggle",X={__name:"UiSelect",props:{placeholder:{type:String,default:"선택하세요"},options:{type:Array,default:()=>[]},modelValue:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},viewOnly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:a=>["small","medium","large","xlarge"].includes(a)},width:{type:[String,Number],default:"100%"},maxHeight:{type:[String,Number],default:200},forceUpward:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(a,{emit:D}){const y=d(`select-${Math.random().toString(36).substr(2,9)}`),u=d(null),w=d(null),_=d("down"),b=d({}),t=a,E=D,l=d(!1),i=d(t.modelValue),k=M(()=>t.options.find(e=>e.value===i.value)),s=()=>{if(!u.value)return;const e=u.value.getBoundingClientRect(),r=window.innerHeight,n=window.innerWidth,B=Math.min(t.options.length*40+16,typeof t.maxHeight=="number"?t.maxHeight:parseInt(t.maxHeight)),h=r-e.bottom-8,O=e.top-8;let p="down";(t.forceUpward||h<B&&O>h)&&(p="up"),_.value=p;const o={position:"fixed",left:`${e.left}px`,width:`${e.width}px`,zIndex:9999,maxHeight:`${t.maxHeight}px`};p==="up"?(o.bottom=`${r-e.top+4}px`,o.maxHeight=`${Math.min(O,typeof t.maxHeight=="number"?t.maxHeight:parseInt(t.maxHeight))}px`):(o.top=`${e.bottom+4}px`,o.maxHeight=`${Math.min(h,typeof t.maxHeight=="number"?t.maxHeight:parseInt(t.maxHeight))}px`),e.right>n&&(o.right="8px",delete o.left),b.value=o},I=async()=>{t.disabled||t.viewOnly||(l.value||window.dispatchEvent(new CustomEvent(x,{detail:{id:y.value}})),l.value=!l.value,l.value?(await z(),s(),window.addEventListener("resize",s),window.addEventListener("scroll",s,!0)):(window.removeEventListener("resize",s),window.removeEventListener("scroll",s,!0)))},N=e=>{t.disabled||t.viewOnly||(i.value=e.value,E("update:modelValue",e.value),E("change",e.value),l.value=!1)},H=e=>{e.detail.id!==y.value&&l.value&&(l.value=!1)},L=e=>{l.value&&u.value&&!u.value.contains(e.target)&&w.value&&!w.value.contains(e.target)&&(l.value=!1)},S=e=>{var r,n;e.key==="Escape"&&l.value&&(l.value=!1,(n=(r=u.value)==null?void 0:r.querySelector(".ui-select__header"))==null||n.focus())};return $(()=>t.modelValue,e=>{i.value=e}),$(l,e=>{e&&z(()=>s())}),T(()=>{window.addEventListener(x,H),document.addEventListener("click",L),document.addEventListener("keydown",S)}),U(()=>{window.removeEventListener(x,H),document.removeEventListener("click",L),document.removeEventListener("keydown",S),window.removeEventListener("resize",s),window.removeEventListener("scroll",s,!0)}),(e,r)=>(c(),v("div",{class:f(["ui-select",[`ui-select--${a.size}`,{"ui-select--open":l.value,"ui-select--selected":i.value&&i.value!=="","ui-select--error":a.error,"ui-select--disabled":a.disabled,"ui-select--view":a.viewOnly}]]),style:V({width:a.width}),ref_key:"selectRef",ref:u},[m("div",{class:"ui-select__header",onClick:I,tabindex:a.disabled||a.viewOnly?-1:0,role:"combobox","aria-haspopup":"listbox","aria-expanded":l.value},[m("div",G,[k.value?(c(),v("span",J,g(k.value.label),1)):(c(),v("span",P,g(a.placeholder),1))]),m("i",{class:f(["ui-select__icon",{"ui-select__icon--up":l.value}])},null,2)],8,W),l.value?(c(),q(K,{key:0,to:"body"},[m("div",{class:f(["ui-select__dropdown",{"ui-select__dropdown--up":_.value==="up"}]),style:V(b.value),ref_key:"dropdownRef",ref:w},[m("div",Y,[(c(!0),v(A,null,F(a.options,n=>(c(),v("div",{key:n.value,class:f(["ui-select__option",{"ui-select__option--selected":i.value===n.value}]),role:"option","aria-selected":i.value===n.value,onClick:B=>N(n)},g(n.label),11,j))),128)),a.options.length===0?(c(),v("div",Q,"옵션이 없습니다")):C("",!0)])],6)])):C("",!0)],6))}},ee=R(X,[["__scopeId","data-v-f6f62a34"]]);export{ee as default};
