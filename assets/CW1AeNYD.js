import{_ as ue,r as h,g as P,e as se,H as re,a4 as U,c as i,o as u,n as m,a as o,d as A,t as p,q as C,F as Y,i as B,B as V}from"./DQiIi3xA.js";const oe=["for"],ce={key:0,class:"ui-datepicker__required"},de={class:"ui-datepicker__wrapper"},ve={class:"ui-datepicker__text"},fe={key:0,class:"ui-datepicker__selected-text"},pe={key:1,class:"ui-datepicker__placeholder"},ke={class:"ui-datepicker__range-text"},_e={key:0,class:"ui-datepicker__selected-text"},ge={key:1,class:"ui-datepicker__placeholder"},me={class:"ui-datepicker__range-text"},ye={key:0,class:"ui-datepicker__selected-text"},he={key:1,class:"ui-datepicker__placeholder"},De={key:1,class:"ui-datepicker__calendar"},we={key:0},be={class:"ui-datepicker__header"},Me={class:"ui-datepicker__selectors"},Se={class:"ui-datepicker__dropdown"},Ce=["onClick"],Re={class:"ui-datepicker__dropdown"},xe=["onClick"],Ye={class:"ui-datepicker__weekdays"},Be={class:"ui-datepicker__days"},Ve=["onClick"],Fe={key:1,class:"ui-datepicker__actions"},Ne={key:2,class:"ui-datepicker__error"},Te={key:3,class:"ui-datepicker__helper"},Ee={__name:"UiDatePicker",props:{modelValue:{type:[Date,String,Array,null],default:null},isRange:{type:Boolean,default:!1},label:{type:String,default:""},placeholder:{type:String,default:"날짜 선택"},full:{type:Boolean,default:!1},startPlaceholder:{type:String,default:"시작일"},endPlaceholder:{type:String,default:"종료일"},format:{type:String,default:"YYYY.MM.DD"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},helperText:{type:String,default:""},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},size:{type:String,default:"medium",validator:n=>["small","medium","large","xlarge"].includes(n)},block:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(n,{emit:I}){const s=n,D=I,w=h(!1),v=h(new Date().getMonth()),f=h(new Date().getFullYear()),c=h(null),t=h(null),l=h(null),F=h(null),N=h(null),T=h("days"),b=h(!1),M=h(!1),H=["일","월","화","수","목","금","토"],q=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],W=P(()=>{const e=[],a=f.value-10,r=f.value+10;for(let k=a;k<=r;k++)e.push(k);return e}),j=P(()=>q[v.value]),G=P(()=>{const e=[],a=new Date(f.value,v.value,1),r=new Date(f.value,v.value+1,0),k=a.getDay(),y=new Date(f.value,v.value,0).getDate();for(let _=0;_<k;_++){const d=new Date(f.value,v.value-1,y-k+_+1);e.push({day:d.getDate(),date:d,currentMonth:!1,disabled:R(d),selected:g(d,c.value),rangeStart:g(d,t.value),rangeEnd:g(d,l.value),inRange:x(d)})}for(let _=1;_<=r.getDate();_++){const d=new Date(f.value,v.value,_);e.push({day:_,date:d,currentMonth:!0,disabled:R(d),selected:g(d,c.value),rangeStart:g(d,t.value),rangeEnd:g(d,l.value),inRange:x(d)})}const ie=42-e.length;for(let _=1;_<=ie;_++){const d=new Date(f.value,v.value+1,_);e.push({day:_,date:d,currentMonth:!1,disabled:R(d),selected:g(d,c.value),rangeStart:g(d,t.value),rangeEnd:g(d,l.value),inRange:x(d)})}return e});se(()=>{J(),document.addEventListener("click",L)}),re(()=>{document.removeEventListener("click",L)});function J(){if(s.modelValue){if(s.isRange&&Array.isArray(s.modelValue))s.modelValue[0]&&(t.value=new Date(s.modelValue[0])),s.modelValue[1]&&(l.value=new Date(s.modelValue[1])),t.value&&(v.value=t.value.getMonth(),f.value=t.value.getFullYear());else if(!s.isRange)try{c.value=new Date(s.modelValue),isNaN(c.value.getTime())?c.value=null:(v.value=c.value.getMonth(),f.value=c.value.getFullYear())}catch{c.value=null}}}function K(){b.value=!b.value,b.value&&(M.value=!1)}function Q(){M.value=!M.value,M.value&&(b.value=!1)}function S(){b.value=!1,M.value=!1}function g(e,a){return!e||!a?!1:e.getDate()===a.getDate()&&e.getMonth()===a.getMonth()&&e.getFullYear()===a.getFullYear()}function R(e){if(s.minDate){const a=new Date(s.minDate);if(e<a)return!0}if(s.maxDate){const a=new Date(s.maxDate);if(e>a)return!0}return!1}function X(e){return e?s.isRange?t.value&&g(e,t.value)||l.value&&g(e,l.value):c.value&&g(e,c.value):!1}function x(e){return!s.isRange||!t.value||!l.value||!e?!1:e>t.value&&e<l.value}function E(e){if(!e||isNaN(e.getTime()))return"";try{const a=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),k=String(e.getDate()).padStart(2,"0");let y=s.format;return y=y.replace("YYYY",a),y=y.replace("MM",r),y=y.replace("DD",k),y}catch{return""}}function z(){s.disabled||(w.value=!0,T.value="days",s.isRange&&(F.value=t.value?new Date(t.value):null,N.value=l.value?new Date(l.value):null))}function L(e){!e.target.closest(".ui-datepicker")&&w.value&&(s.isRange&&(t.value=F.value,l.value=N.value),w.value=!1,S())}function Z(){v.value===0?(v.value=11,f.value--):v.value--,S()}function ee(){v.value===11?(v.value=0,f.value++):v.value++,S()}function ae(e){v.value=e,b.value=!1}function te(e){f.value=e,M.value=!1}function le(e){if(!e.disabled)if(S(),s.isRange)if(!t.value||t.value&&l.value)t.value=new Date(e.date),l.value=null;else if(e.date>=t.value)l.value=new Date(e.date),O();else{const a=new Date(t.value);t.value=new Date(e.date),l.value=a,O()}else c.value=new Date(e.date),D("update:modelValue",c.value),D("change",c.value),w.value=!1}function $(e){e.stopPropagation(),s.isRange?(t.value=null,l.value=null,D("update:modelValue",[null,null]),D("change",[null,null])):(c.value=null,D("update:modelValue",null),D("change",null))}function ne(){t.value=F.value,l.value=N.value,w.value=!1,S()}function O(){t.value&&l.value&&(D("update:modelValue",[t.value,l.value]),D("change",[t.value,l.value]),w.value=!1,S())}return U(()=>s.modelValue,e=>{if(e==null){c.value=null,t.value=null,l.value=null;return}if(s.isRange&&Array.isArray(e))t.value=e[0]?new Date(e[0]):null,l.value=e[1]?new Date(e[1]):null;else if(!s.isRange)try{c.value=e?new Date(e):null}catch{c.value=null}},{immediate:!0}),U([c,t,l],()=>{const e=s.isRange?t.value||l.value:c.value;e&&(v.value=e.getMonth(),f.value=e.getFullYear())}),(e,a)=>(u(),i("div",{class:V(["ui-datepicker",[`ui-datepicker--${n.size}`,{"ui-datepicker--opened":w.value,"ui-datepicker--range":n.isRange,"ui-datepicker--disabled":n.disabled,"ui-datepicker--error":n.error,"ui-datepicker--block":n.block,"ui-datepicker--full":n.full,"ui-datepicker--has-value":n.isRange?t.value||l.value:c.value}]])},[n.label?(u(),i("label",{key:0,class:"ui-datepicker__label",for:e.id},[A(p(n.label)+" ",1),n.required?(u(),i("span",ce,"*")):m("",!0)],8,oe)):m("",!0),o("div",de,[n.isRange?m("",!0):(u(),i("div",{key:0,class:"ui-datepicker__input",onClick:z},[a[2]||(a[2]=o("i",{class:"icon icon-calendar icon-md ui-datepicker__icon"},null,-1)),o("div",ve,[c.value?(u(),i("span",fe,p(E(c.value)),1)):(u(),i("span",pe,p(n.placeholder||"날짜 선택"),1))]),c.value&&n.clearable?(u(),i("i",{key:0,class:"icon icon-x-circle icon-md ui-datepicker__clear",onClick:C($,["stop"])})):m("",!0)])),n.isRange?(u(),i("div",{key:1,class:"ui-datepicker__range-input",onClick:z},[a[3]||(a[3]=o("i",{class:"icon icon-calendar icon-md ui-datepicker__icon"},null,-1)),o("div",ke,[t.value?(u(),i("span",_e,p(E(t.value)),1)):(u(),i("span",ge,p(n.startPlaceholder||"시작일"),1))]),a[4]||(a[4]=o("div",{class:"ui-datepicker__range-separator"},"-",-1)),o("div",me,[l.value?(u(),i("span",ye,p(E(l.value)),1)):(u(),i("span",he,p(n.endPlaceholder||"종료일"),1))]),(t.value||l.value)&&n.clearable?(u(),i("i",{key:0,class:"icon icon-x-circle icon-md ui-datepicker__clear",onClick:C($,["stop"])})):m("",!0)])):m("",!0)]),w.value?(u(),i("div",De,[T.value==="days"?(u(),i("div",we,[o("div",be,[o("button",{class:"ui-datepicker__arrow ui-datepicker__arrow--prev",onClick:Z,type:"button"},a[5]||(a[5]=[o("i",{class:"icon icon-chevron-left icon-md"},null,-1)])),o("div",Me,[o("div",Se,[o("div",{class:"ui-datepicker__month-select",onClick:C(K,["stop"])},[A(p(j.value)+" ",1),a[6]||(a[6]=o("i",{class:"icon icon-chevron-down icon-sm"},null,-1))]),b.value?(u(),i("div",{key:0,class:"ui-datepicker__dropdown-list",onClick:a[0]||(a[0]=C(()=>{},["stop"]))},[(u(),i(Y,null,B(q,(r,k)=>o("div",{key:r,class:V(["ui-datepicker__dropdown-item",{"ui-datepicker__dropdown-item--selected":v.value===k}]),onClick:y=>ae(k)},p(r),11,Ce)),64))])):m("",!0)]),o("div",Re,[o("div",{class:"ui-datepicker__year-select",onClick:C(Q,["stop"])},[A(p(f.value)+" ",1),a[7]||(a[7]=o("i",{class:"icon icon-chevron-down icon-sm"},null,-1))]),M.value?(u(),i("div",{key:0,class:"ui-datepicker__dropdown-list",onClick:a[1]||(a[1]=C(()=>{},["stop"]))},[(u(!0),i(Y,null,B(W.value,r=>(u(),i("div",{key:r,class:V(["ui-datepicker__dropdown-item",{"ui-datepicker__dropdown-item--selected":f.value===r}]),onClick:k=>te(r)},p(r),11,xe))),128))])):m("",!0)])]),o("button",{class:"ui-datepicker__arrow ui-datepicker__arrow--next",onClick:ee,type:"button"},a[8]||(a[8]=[o("i",{class:"icon icon-chevron-right icon-md"},null,-1)]))]),o("div",Ye,[(u(),i(Y,null,B(H,r=>o("div",{key:r,class:"ui-datepicker__weekday"},p(r),1)),64))]),o("div",Be,[(u(!0),i(Y,null,B(G.value,(r,k)=>(u(),i("div",{key:k,class:V(["ui-datepicker__day",{"ui-datepicker__day--other-month":!r.currentMonth,"ui-datepicker__day--today":r.isToday,"ui-datepicker__day--selected":X(r.date),"ui-datepicker__day--in-range":x(r.date),"ui-datepicker__day--disabled":R(r.date)}]),onClick:y=>!R(r.date)&&le(r)},p(r.day),11,Ve))),128))])])):m("",!0),n.isRange&&T.value==="days"?(u(),i("div",Fe,[o("button",{class:"ui-datepicker__action-button ui-datepicker__action-button--cancel",onClick:ne}," 취소 "),o("button",{class:"ui-datepicker__action-button ui-datepicker__action-button--apply",onClick:O}," 적용 ")])):m("",!0)])):m("",!0),n.error&&n.errorMessage?(u(),i("div",Ne,p(n.errorMessage),1)):n.helperText?(u(),i("div",Te,p(n.helperText),1)):m("",!0)],2))}},Pe=ue(Ee,[["__scopeId","data-v-c1af75f1"]]);export{Pe as default};
