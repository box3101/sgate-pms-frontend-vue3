import{_ as q,r as v,g as L,a4 as K,e as N,Q,c as u,o as i,a as s,k as E,F as I,i as M,n as f,t as h,q as D,v as T,B as w,ab as J,x as j,J as G,ac as H}from"./BCYWSh4i.js";const P={class:"ui-multi-select__tags"},R={class:"ui-multi-select__tag-avatar"},W=["src","alt"],X={class:"ui-multi-select__tag-label"},Y=["onClick"],Z={class:"ui-multi-select__input-wrapper"},ee=["placeholder","disabled"],le={class:"ui-multi-select__indicators"},te={key:0,class:"ui-multi-select__spinner"},se={class:"ui-multi-select__dropdown"},ae={key:0,class:"ui-multi-select__no-results"},ue={class:"ui-multi-select__no-results-text"},ie={key:1,class:"ui-multi-select__empty"},ce={key:2,class:"ui-multi-select__options"},ne=["onClick","onMouseenter"],oe={class:"ui-multi-select__option-info"},de={class:"ui-multi-select__option-name"},re={key:0,class:"ui-multi-select__option-email"},ve={key:1,class:"ui-multi-select__option-department"},me={class:"ui-multi-select__option-checkbox"},_e={key:0,viewBox:"0 0 16 16",class:"ui-multi-select__check-icon"},fe={__name:"UiMultiSelect",props:{options:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},placeholder:{type:String,default:"협업자 이름을 입력해주세요"},disabled:{type:Boolean,default:!1},viewOnly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:a=>["small","medium","large","xlarge"].includes(a)},width:{type:[String,Number],default:"100%"}},emits:["update:modelValue","search","focus","blur"],setup(a,{emit:z}){H(e=>({"5de6f4a1":a.width}));const c=a,p=z,r=v(!1),y=v(!1),n=v([...c.modelValue]),o=v(""),d=v(-1),g=v(null),O=v(`multi-select-${Math.random().toString(36).substr(2,9)}`),m=L(()=>c.options.filter(e=>n.value.includes(e.value))),_=L(()=>{if(!o.value)return c.options;const e=o.value.toLowerCase();return c.options.filter(l=>l.label.toLowerCase().includes(e)||l.email&&l.email.toLowerCase().includes(e)||l.department&&l.department.toLowerCase().includes(e))}),k=e=>n.value.includes(e.value),C=e=>{if(c.disabled||c.viewOnly)return;const l=n.value.indexOf(e.value);l===-1?n.value.push(e.value):n.value.splice(l,1),p("update:modelValue",n.value),o.value="",G(()=>{var t;(t=g.value)==null||t.focus()})},S=e=>{if(c.disabled||c.viewOnly)return;const l=n.value.indexOf(e.value);l!==-1&&(n.value.splice(l,1),p("update:modelValue",n.value))},F=()=>{var e;c.disabled||c.viewOnly||(e=g.value)==null||e.focus()},$=()=>{y.value=!0,r.value=!0,d.value=-1,p("focus"),window.dispatchEvent(new CustomEvent("select-dropdown-toggle",{detail:{id:O.value}}))},b=e=>{o.value=e.target.value,p("search",o.value),d.value=-1},A=e=>{var l;switch(e.key){case"ArrowDown":e.preventDefault(),d.value<_.value.length-1&&d.value++;break;case"ArrowUp":e.preventDefault(),d.value>0&&d.value--;break;case"Enter":e.preventDefault(),d.value>=0&&_.value[d.value]&&C(_.value[d.value]);break;case"Escape":r.value=!1,(l=g.value)==null||l.blur();break;case"Backspace":!o.value&&m.value.length>0&&S(m.value[m.value.length-1]);break}},B=e=>{e.detail.id!==O.value&&r.value&&(r.value=!1,y.value=!1)},V=e=>{!e.target.closest(".ui-multi-select")&&r.value&&(r.value=!1,y.value=!1)};return K(()=>c.modelValue,e=>{n.value=[...e]},{deep:!0}),N(()=>{document.addEventListener("click",V),window.addEventListener("select-dropdown-toggle",B)}),Q(()=>{document.removeEventListener("click",V),window.removeEventListener("select-dropdown-toggle",B)}),(e,l)=>(i(),u("div",{class:w(["ui-multi-select",[`ui-multi-select--${a.size}`,{"ui-multi-select--open":r.value,"ui-multi-select--selected":n.value.length>0,"ui-multi-select--error":a.error,"ui-multi-select--disabled":a.disabled,"ui-multi-select--view":a.viewOnly,"ui-multi-select--focused":y.value}]]),style:j({width:a.width})},[s("div",{class:"ui-multi-select__control",onClick:F},[s("div",P,[(i(!0),u(I,null,M(m.value,t=>(i(),u("div",{key:t.value,class:"ui-multi-select__tag"},[s("div",R,[t.avatar?(i(),u("img",{key:0,src:t.avatar,alt:t.label,class:"ui-multi-select__avatar-image"},null,8,W)):f("",!0)]),s("span",X,h(t.label),1),!a.disabled&&!a.viewOnly?(i(),u("button",{key:0,class:"ui-multi-select__tag-remove",onClick:D(x=>S(t),["stop"]),type:"button"}," × ",8,Y)):f("",!0)]))),128)),s("div",Z,[E(s("input",{ref_key:"searchInput",ref:g,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t),class:"ui-multi-select__input",placeholder:m.value.length===0?a.placeholder:"",disabled:a.disabled||a.viewOnly,onFocus:$,onKeydown:A,onInput:b,onKeyup:b,onCompositionupdate:b,autocomplete:"off"},null,40,ee),[[T,o.value]])])]),s("div",le,[a.loading?(i(),u("div",te)):(i(),u("i",{key:1,class:w(["ui-multi-select__icon",{"ui-multi-select__icon--up":r.value}])},null,2))])]),E(s("div",se,[_.value.length===0&&o.value?(i(),u("div",ae,[l[1]||(l[1]=s("div",{class:"ui-multi-select__no-results-icon"},"🔍",-1)),s("div",ue,' "'+h(o.value)+'"에 대한 검색 결과가 없습니다 ',1)])):a.options.length===0&&!o.value?(i(),u("div",ie,l[2]||(l[2]=[s("div",{class:"ui-multi-select__empty-icon"},"👥",-1),s("div",{class:"ui-multi-select__empty-text"},"협업자를 추가해보세요",-1)]))):(i(),u("div",ce,[(i(!0),u(I,null,M(_.value,(t,x)=>(i(),u("div",{key:t.value,class:w(["ui-multi-select__option",{"ui-multi-select__option--selected":k(t),"ui-multi-select__option--highlighted":d.value===x}]),onClick:D(U=>C(t),["stop"]),onMouseenter:U=>d.value=x},[s("div",oe,[s("div",de,h(t.label),1),t.email?(i(),u("div",re,h(t.email),1)):f("",!0),t.department?(i(),u("div",ve,h(t.department),1)):f("",!0)]),s("div",me,[s("div",{class:w(["ui-multi-select__checkbox",{"ui-multi-select__checkbox--checked":k(t)}])},[k(t)?(i(),u("svg",_e,l[3]||(l[3]=[s("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"},null,-1)]))):f("",!0)],2)])],42,ne))),128))]))],512),[[J,r.value]])],6))}},pe=q(fe,[["__scopeId","data-v-d7d363a1"]]);export{pe as default};
