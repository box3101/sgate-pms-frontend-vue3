import ee from"./B8PkfAZR.js";import{_ as te,a8 as A,r as c,a4 as O,g as oe,e as le,H as ne,c as m,n as v,o as f,a as n,F as j,B as z,a7 as Y,d as ie,t as ue,b as q,x as G,a9 as se}from"./DQiIi3xA.js";const ae={class:"flex items-center gap-5"},de={class:"ui-popup__title"},re={class:"ui-popup__header-actions"},ce={class:"ui-popup__actions flex gap-5"},me={key:2,class:"ui-popup__footer"},fe={__name:"UiModal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:""},size:{type:String,default:"medium",validator:o=>["small","xmedium","medium","large","mlarge","xlarge","xxlarge","full"].includes(o)},centered:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},closeOnBackdropClick:{type:Boolean,default:!0},position:{type:String,default:"center",validator:o=>["center","right"].includes(o)},noDim:{type:Boolean,default:!1},showFooter:{type:Boolean,default:!1},isScroll:{type:Boolean,default:!1},showSizeButtons:{type:Boolean,default:!1},allowBackgroundInteraction:{type:Boolean,default:!1},allowFloating:{type:Boolean,default:!1},height:{type:[String,Number],default:null}},emits:["update:modelValue","floating-changed","activate-modal"],setup(o,{emit:J}){A("floatingPopupCount",c(0));const K=A("fixedPopupCount",c(0)),N=c(!1);se("isModalFloating",N);const d=o,y=J,u=c(!1),r=c(null),w=c(null),a=c("default"),s=c(!1),h=c({x:0,y:0});O(s,t=>{N.value=t,y("floating-changed",t)});const x=c(window.innerWidth),R=()=>{x.value=window.innerWidth},Q=oe(()=>{if(u.value)return{};if(s.value){const e={position:"fixed",top:`${h.value.y}px`,left:`${h.value.x}px`,transform:"none",maxHeight:"600px",minWidth:"auto"};return r.value?e.width=`${r.value}px`:e.width=d.position==="right"?`${x.value/3}px`:void 0,w.value&&(e.height=`${w.value}px`,e.maxHeight=`${w.value}px`),e}if(r.value&&d.position==="right")return{width:`${r.value}px`};if(d.position==="right"){if(a.value==="half")return{width:`${x.value/2}px`};if(a.value==="default")return{width:`${x.value/3}px`}}const t={};if(d.height){const e=typeof d.height=="number"?`${d.height}px`:d.height;t.height=e,t.maxHeight=e}return t});let L=!1,g=null,k=0,D=0,b=0,F=0,X=null;O(()=>d.modelValue,t=>{t?(document.documentElement.style.overflowY="hidden",document.body.style.overflowY="hidden"):(document.documentElement.style.overflowY="",document.body.style.overflowY="")},{immediate:!0}),le(()=>{document.addEventListener("mousemove",$),document.addEventListener("mouseup",C),window.addEventListener("resize",R),d.modelValue&&(document.documentElement.style.overflowY="hidden",document.body.style.overflowY="hidden");const t=localStorage.getItem("modalSizeMode");t&&(a.value=t)}),ne(()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",C),window.removeEventListener("resize",R),document.documentElement.style.overflowY="",document.body.style.overflowY=""});function Z(){u.value=!u.value,u.value?(r.value=null,a.value="full",B()):(a.value="default",B())}function U(t){u.value&&t!=="full"&&(u.value=!1),a.value=t,r.value=null,B()}function B(){localStorage.setItem("modalSizeMode",a.value)}function E(t="left",e){u.value||(L=!0,g=t,k=e.clientX,D=e.clientY,X=e.target.closest(".ui-popup__content"),b=X.offsetWidth,F=X.offsetHeight,document.addEventListener("mousemove",$),document.addEventListener("mouseup",C),t==="left"||t==="right"?document.body.style.cursor="ew-resize":t==="bottom"?document.body.style.cursor="ns-resize":t==="corner"&&(document.body.style.cursor="nwse-resize"),e.preventDefault())}function $(t){if(!L)return;const e=window.innerWidth,p=window.innerHeight,l=300,T=200;if(g==="left"){const i=b-(t.clientX-k);i>=l&&i<=e&&(r.value=i,a.value="custom")}else if(g==="right"){const i=b+(t.clientX-k);i>=l&&i<=e&&(r.value=i)}else if(g==="bottom"){const i=F+(t.clientY-D);i>=T&&i<=p&&(w.value=i)}else if(g==="corner"){const i=b+(t.clientX-k),I=F+(t.clientY-D);i>=l&&i<=e&&(r.value=i),I>=T&&I<=p&&(w.value=I)}}function C(){L=!1,g=null,document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",C),document.body.style.cursor="",a.value==="custom"&&B()}let S=!1,V=0,H=0,M={x:0,y:0};function _(t){if(t.target.closest(".ui-popup__actions"))return;y("activate-modal"),S=!0;const e=t.currentTarget.getBoundingClientRect();M={x:e.left,y:e.top},t.clientX-e.left,t.clientY-e.top,s.value?(V=t.clientX-h.value.x,H=t.clientY-h.value.y):(V=t.clientX-M.x,H=t.clientY-M.y),document.addEventListener("mousemove",W),document.addEventListener("mouseup",P),document.body.style.cursor="move"}function W(t){if(!S)return;const e=t.clientX-V,p=t.clientY-H;if(e>x.value-700&&d.position==="right"&&K.value==0){s.value=!1,S=!1,h.value={x:0,y:0},y("floating-changed",!1),a.value="default",r.value=null,document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",P),document.body.style.cursor="";return}h.value={x:e,y:p},!s.value&&M.x-t.clientX>50&&(s.value=!0,y("floating-changed",!0))}function P(){S=!1,document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",P),document.body.style.cursor=""}return(t,e)=>{const p=ee;return o.modelValue?(f(),m("div",{key:0,class:z(["ui-popup",{"ui-popup--content-only":o.allowBackgroundInteraction}])},[o.noDim?v("",!0):(f(),m("div",{key:0,class:"ui-popup__backdrop",onClick:e[0]||(e[0]=l=>o.closeOnBackdropClick&&t.$emit("update:modelValue",!1))})),n("div",{class:z(["ui-popup__content",[`ui-popup--${o.size}`,{"ui-popup--centered":o.centered&&!u.value},{"ui-popup--right":o.position==="right"&&!u.value},{"ui-popup--no-dim":o.noDim},{"ui-popup--fullscreen":u.value},{"ui-popup--no-scroll":o.isScroll},{"ui-popup--floating":s.value}]]),style:G(Q.value),onClick:e[9]||(e[9]=l=>s.value&&y("activate-modal"))},[o.position==="right"&&!u.value&&!s.value?(f(),m("div",{key:0,class:"ui-popup__resize-handle ui-popup__resize-handle--left",onMousedown:e[1]||(e[1]=l=>E("left",l))},null,32)):v("",!0),s.value&&!u.value?(f(),m(j,{key:1},[n("div",{class:"ui-popup__resize-handle ui-popup__resize-handle--right",onMousedown:e[2]||(e[2]=l=>E("right",l))},null,32),n("div",{class:"ui-popup__resize-handle ui-popup__resize-handle--bottom",onMousedown:e[3]||(e[3]=l=>E("bottom",l))},null,32),n("div",{class:"ui-popup__resize-handle ui-popup__resize-handle--corner",onMousedown:e[4]||(e[4]=l=>E("corner",l))},null,32)],64)):v("",!0),n("div",{class:z(["ui-popup__header",{"ui-popup__header--draggable":o.allowFloating}]),onMousedown:e[8]||(e[8]=l=>o.allowFloating&&_(l))},[n("div",ae,[n("h3",de,[Y(t.$slots,"title",{},()=>[ie(ue(o.title),1)],!0)])]),n("div",re,[Y(t.$slots,"headerActions-right",{},void 0,!0),n("div",ce,[(f(),m(j,{key:0},[n("button",{class:"ui-popup__fullscreen",onClick:Z,title:"전체화면"},[q(p,{name:"heroicons:arrows-pointing-out",size:"18"})]),o.position==="right"&&o.showSizeButtons&&!s.value?(f(),m("button",{key:0,class:z(["ui-popup__size-btn",{active:a.value==="half"&&!u.value}]),onClick:e[5]||(e[5]=l=>U("half")),title:"넓은 크기 (1/2)"},e[10]||(e[10]=[n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("rect",{x:"2",y:"4",width:"9",height:"16",fill:"currentColor"}),n("rect",{x:"13",y:"4",width:"9",height:"16",fill:"none",stroke:"currentColor","stroke-width":"1.5"})],-1)]),2)):v("",!0),o.position==="right"&&o.showSizeButtons&&!s.value?(f(),m("button",{key:1,class:z(["ui-popup__size-btn",{active:a.value==="default"&&!u.value}]),onClick:e[6]||(e[6]=l=>U("default")),title:"기본 크기 (1/3)"},e[11]||(e[11]=[n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"text-gray-400"},[n("rect",{x:"2",y:"4",width:"6",height:"16",fill:"currentColor"}),n("rect",{x:"10",y:"4",width:"6",height:"16",fill:"none",stroke:"currentColor","stroke-width":"1.5"}),n("rect",{x:"18",y:"4",width:"4",height:"16",fill:"none",stroke:"currentColor","stroke-width":"1.5"})],-1)]),2)):v("",!0),o.showCloseButton||s.value?(f(),m("button",{key:2,class:"ui-popup__close",onClick:e[7]||(e[7]=l=>t.$emit("update:modelValue",!1))},[q(p,{name:"heroicons:x-mark",size:"20"})])):v("",!0)],64))])])],34),n("div",{class:"ui-popup__body",style:G({padding:`${o.size==="small"?"0px":o.size==="xmedium"?"12px":o.size==="medium"?"16px":o.size==="large"?"20px":(o.size==="xlarge","24px")}`})},[Y(t.$slots,"default",{},void 0,!0)],4),o.showFooter?(f(),m("div",me,[Y(t.$slots,"footerActions",{},void 0,!0)])):v("",!0)],6)],2)):v("",!0)}}},he=te(fe,[["__scopeId","data-v-e638f99b"]]);export{he as default};
