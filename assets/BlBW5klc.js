import{_ as z,r as I,a4 as v,g as f,c as p,o as h,a as y,n as m,a7 as g,B as O}from"./DK13UrN4.js";const T={class:"ui-table-wrapper-default"},M={key:0},U={key:1,class:"ui-table-default__header"},q={class:"ui-table-default__body"},H={key:0,class:"ui-table-default__loading"},J=["colspan"],L={key:2,class:"ui-table-default__footer"},Q={__name:"UiTableDefault",props:{modelValue:{type:Array,default:()=>[]},selectable:{type:Boolean,default:!1},selected:{type:Array,default:()=>[]},rowKey:{type:String,default:"id"},bordered:{type:Boolean,default:!1},striped:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:d=>["small","medium","large"].includes(d)},loading:{type:Boolean,default:!1},emptyMessage:{type:String,default:"데이터가 없습니다."},columnCount:{type:Number,default:4},vertical:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},htmlTemplate:{type:Boolean,default:!1},rowSpanConfig:{type:Object,default:()=>({})},colspanConfig:{type:Object,default:()=>({})},groupByColumns:{type:Array,default:()=>[]},nestedDataKey:{type:String,default:"items"}},emits:["update:selected","row-click"],setup(d,{emit:S}){const t=d,w=S,u=I([...t.selected]);v(()=>t.selected,e=>{u.value=[...e]},{deep:!0}),v(u,e=>{w("update:selected",e)},{deep:!0});const b=f(()=>t.modelValue.length?t.modelValue.every(e=>u.value.some(l=>l[t.rowKey]===e[t.rowKey])):!1),$=f(()=>{const e=u.value.filter(l=>t.modelValue.some(o=>o[t.rowKey]===l[t.rowKey])).length;return e>0&&e<t.modelValue.length}),B=()=>{if(b.value)u.value=u.value.filter(e=>!t.modelValue.some(l=>l[t.rowKey]===e[t.rowKey]));else{const e=t.modelValue.map(o=>o[t.rowKey]),l=u.value.filter(o=>!e.includes(o[t.rowKey]));u.value=[...l,...t.modelValue]}},C=e=>u.value.some(l=>l[t.rowKey]===e[t.rowKey]),R=e=>{C(e)?u.value=u.value.filter(l=>l[t.rowKey]!==e[t.rowKey]):u.value.push(e)},V=f(()=>({modelValue:b.value,indeterminate:$.value,"onUpdate:modelValue":B})),_=(e,l,o)=>{w("row-click",{row:e,index:l,event:o})},k=f(()=>[`ui-table-default--${t.size}`,{"ui-table-default--bordered":t.bordered,"ui-table-default--striped":t.striped,"ui-table-default--hover":t.hover,"ui-table-default--loading":t.loading,"ui-table-default--vertical":t.vertical,"ui-table-default--selectable":t.selectable}]),E=(e,l,o)=>{const a={rowspan:1,colspan:1};return t.getRowSpan&&(a.rowspan=t.getRowSpan(e,l,o)||1),t.getColSpan&&(a.colspan=t.getColSpan(e,l,o)||1),a},A=(e,l,o)=>t.shouldShowCell?t.shouldShowCell(e,l,o):!0,G=f(()=>{if(!t.groupByColumns.length)return t.modelValue;const e=[];return t.modelValue.forEach(l=>{l[t.nestedDataKey]&&Array.isArray(l[t.nestedDataKey])?K(l,e):e.push(l)}),D(e)}),K=(e,l)=>{const o=e[t.nestedDataKey];if(t.groupByColumns.length>=2){const[a,r]=t.groupByColumns,s={};o.forEach(c=>{const i=c[r];s[i]||(s[i]=[]),s[i].push(c)});let n=!0;Object.entries(s).forEach(([c,i])=>{i.forEach((P,j)=>{l.push({...P,[a]:e[a],[`is${a}First`]:n,[`${a}Rowspan`]:o.length,[`is${r}First`]:j===0,[`${r}Rowspan`]:i.length,[`${r}Value`]:c}),n&&(n=!1)})})}else{const a=t.groupByColumns[0];o.forEach((r,s)=>{l.push({...r,[a]:e[a],[`is${a}First`]:s===0,[`${a}Rowspan`]:o.length})})}},D=e=>{if(!t.groupByColumns.length)return e;const l=[],o={};e.forEach(r=>{t.groupByColumns.forEach(s=>{const n=r[s];o[s]||(o[s]={}),o[s][n]=(o[s][n]||0)+1})});const a={};return e.forEach(r=>{const s={...r};t.groupByColumns.forEach(n=>{const c=r[n],i=`${n}_${c}`;a[i]?(s[`is${n}First`]=!1,s[`${n}Rowspan`]=0):(s[`is${n}First`]=!0,s[`${n}Rowspan`]=o[n][c],a[i]=!0)}),l.push(s)}),l},F=(e,l)=>t.groupByColumns.includes(l)?e[`is${l}First`]:!0,N=(e,l)=>t.groupByColumns.includes(l)&&e[`${l}Rowspan`]||1;return(e,l)=>(h(),p("div",T,[y("table",{class:O(["ui-table-default",k.value])},[e.$slots.colgroup?(h(),p("colgroup",M,[g(e.$slots,"colgroup",{},void 0,!0)])):m("",!0),e.$slots.header?(h(),p("thead",U,[g(e.$slots,"header",{selectAllProps:d.selectable?V.value:null,hidden:d.hidden},void 0,!0)])):m("",!0),y("tbody",q,[g(e.$slots,"body",{rows:G.value,loading:d.loading,selectRowProps:d.selectable?{isRowSelected:C,toggleRowSelection:R}:null,onRowClick:_,hidden:d.hidden,getCellSpan:E,shouldShowCell:A,shouldShowGroupCell:F,getGroupRowspan:N},void 0,!0),d.loading?(h(),p("tr",H,[y("td",{colspan:d.columnCount,class:"text-center"},l[0]||(l[0]=[y("div",{class:"loading-spinner"},"로딩 중...",-1)]),8,J)])):m("",!0)]),e.$slots.footer?(h(),p("tfoot",L,[g(e.$slots,"footer",{},void 0,!0)])):m("",!0)],2)]))}},X=z(Q,[["__scopeId","data-v-4fa27628"]]);export{X as default};
